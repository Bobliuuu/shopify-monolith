version: 2

sources:
  - name: shopify_raw
    description: "Raw Shopify data from shopify_airflow database"
    database: shopify_airflow
    schema: public
    tables:
      - name: transactions_table_1
        description: "First source table for Shopify transactions from Airflow"
        columns:
          - name: transaction_id
            description: "Unique transaction identifier"
            tests:
              - unique
              - not_null
          - name: order_id
            description: "Order identifier"
            tests:
              - not_null
          - name: customer_id
            description: "Customer identifier"
            tests:
              - not_null
          - name: transaction_status
            description: "Status of the transaction"
            tests:
              - accepted_values:
                  values: ['pending', 'completed', 'failed']
          - name: payment_method
            description: "Method of payment used"
            tests:
              - accepted_values:
                  values: ['credit_card', 'paypal', 'shop_pay']
          - name: transaction_amount
            description: "Amount of the transaction"
            tests:
              - not_null
          - name: tax_amount
            description: "Tax amount"
            tests:
              - not_null
          - name: shipping_amount
            description: "Shipping amount"
            tests:
              - not_null
          - name: currency
            description: "Currency code"
            tests:
              - not_null
          - name: created_at
            description: "Creation timestamp"
            tests:
              - not_null
          - name: updated_at
            description: "Last update timestamp"
            tests:
              - not_null
          - name: country_code
            description: "Country code"
            tests:
              - not_null
          - name: sales_channel
            description: "Sales channel"
            tests:
              - accepted_values:
                  values: ['online', 'in_store']

      - name: transactions_table_2
        description: "Second source table for Shopify transactions from Airflow"
        columns:
          - name: transaction_id
            description: "Unique transaction identifier"
            tests:
              - unique
              - not_null
          - name: order_id
            description: "Order identifier"
            tests:
              - not_null
          - name: customer_id
            description: "Customer identifier"
            tests:
              - not_null
          - name: transaction_status
            description: "Status of the transaction"
            tests:
              - accepted_values:
                  values: ['pending', 'completed', 'failed']
          - name: payment_method
            description: "Method of payment used"
            tests:
              - accepted_values:
                  values: ['credit_card', 'paypal', 'shop_pay']
          - name: transaction_amount
            description: "Amount of the transaction"
            tests:
              - not_null
          - name: tax_amount
            description: "Tax amount"
            tests:
              - not_null
          - name: shipping_amount
            description: "Shipping amount"
            tests:
              - not_null
          - name: currency
            description: "Currency code"
            tests:
              - not_null
          - name: created_at
            description: "Creation timestamp"
            tests:
              - not_null
          - name: updated_at
            description: "Last update timestamp"
            tests:
              - not_null
          - name: country_code
            description: "Country code"
            tests:
              - not_null
          - name: sales_channel
            description: "Sales channel"
            tests:
              - accepted_values:
                  values: ['online', 'in_store']
        
      - name: shopify__customers
        description: "Customers source table for Shopify transactions from Airflow"
        columns:
          - name: customer_id
            description: "Unique customer id"
            tests:
              - unique
              - not_null
          - name: first_name
            description: "Customer first name"   
          - name: last_name
            description: "Customer last name"
          - name: created_at
            description: "Creation timestamp"
            tests:
              - not_null
          - name: phone_number            
            description: "Customer phone number"
          - name: total_spend
            description: "total expendeture from customers"
          - name: customer_state
            description: "Current state of state of user if they are active or not "

      - name: inventory_table
        description: " Shopify inventory"
        columns:
          - name: inventory_item_id
            description: "Unique inventory id"
            tests:
              - unique
              - not_null
          - name: available
            description: "number of items available"   
          - name: location_id
            description: "inventory location_id"
          - name: updated_at
            description: "updated inventory timestamp"
            tests:
              - not_null

      - name: orders_table
        description: " Shopify orders"
        columns:
          - name: order_id
            description: "Unique order id"
            tests:
              - unique
              - not_null
          - name: available
            description: "number of items available"
          - name: created_at
            description: "Creation timestamp"
            tests:
              - not_null 
          - name: total_price
            description: "total price of order"
          - name: currency
            description: "currency of order"
          - name: fulfillment_status
            description: "currency of order"
          - name: customer_id
            description: " unique id of shopify customer"
            tests:
              - unique
              - not_null
          - name: shipping_address
            description: " shipping address of order"                                
                      

                               